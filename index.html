<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>The Christian Gentlemen</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="papaparse.min.js"></script>
	<script src="Chart.min.js"></script>
	
	
	
</head>
<body>
	<div id="container">
		<input type="text" id="playerName" placeholder="Player Name"></input><br>
		<input type="button" id="search" value="Search"></input>
		<p id="playerInfo"></p>
		<canvas id="myChart" width="1200" height="400"></canvas>
		
	</div>
<script>
var rosterCSV = "";
$("#search").click(function(){
    $.ajax({url: "DCBatters.csv", success: function(result){
        rosterCSV = result;
		console.log(rosterCSV);
		parseData(rosterCSV);
				
    }});
});
function parseData(rosterCSV){
	var pResult = Papa.parse(rosterCSV,{
					header: true
				  });
	var playerName = document.getElementById("playerName").value
	console.log(playerName);
	
		for (i=0;i<pResult.data.length;i++){
			if (pResult.data[i].Name === playerName){
				var player = pResult.data[i];
			};
		};
	
	console.log(player);
	$("#playerInfo").text(player.Name + ", " + player.Team + ", PA:" + player.PA + ", H:" + player.H + ", 2B:" + player.DBL + ", 3B:" + player.TPL + ", HR:" + player.HR + ", SO:" + player.SO + ", BB:" + player.BB + ", SB:" + player.SB + ", CS:" + player.CS);
	
	var hrArray = [];
	var hrRate = player.HR/183;
	var hrHolder = 0;
	var day = [];
	for (j=0; j<183; j++){
		hrHolder = hrHolder + hrRate;
		hrArray.push(Math.round(hrHolder));
		day.push(" ");
	};
	var data = {
		labels: day,
		datasets: [{
			label: "My First dataset",
            fillColor: "rgba(220,220,220,0.2)",
            strokeColor: "rgba(220,220,220,1)",
            pointColor: "rgba(220,220,220,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: hrArray
		}]
	};
	var options = {
		bezierCurve: false
	};
	var ctx = $("#myChart").get(0).getContext("2d");
	var myNewChart = new Chart(ctx).Line(data, options);
}
</script>
</body>
</html>